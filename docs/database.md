# Структура базы данных

## 1. Таблица `CustomUser`

Эта таблица заменяет стандартную таблицу `auth_user` и хранит информацию о пользователях.

### Поля таблицы:
- `id` — уникальный идентификатор пользователя (автоматически создается Django).
- `password` — хэшированный пароль пользователя.
- `last_login` — дата и время последнего входа пользователя.
- `is_superuser` — флаг, указывающий, является ли пользователь суперпользователем.
- `username` — уникальное имя пользователя.
- `nickname` — никнейм пользователя (уникальный, если указано).
- `email` — электронная почта пользователя (уникальная).
- `is_staff` — флаг, указывающий, является ли пользователь сотрудником (доступ к админке).
- `is_active` — флаг, указывающий, активен ли пользователь.
- `date_joined` — дата регистрации пользователя.
- `profile_picture` — путь к изображению профиля (может быть пустым).

---

## 2. Таблица `LanguageLevel`

Эта таблица хранит уровни языка (A1, A2, B1 и т.д.).

### Поля таблицы:
- `id` — уникальный идентификатор уровня языка.
- `level` — уровень языка (например, `A1`, `A2` и т.д.). Это поле ограничено значениями из `LEVEL_CHOICES`.
- `description` — описание уровня языка (может быть пустым).

---

## 3. Таблица `Lesson`

Эта таблица хранит уроки для каждого уровня языка.

### Поля таблицы:
- `id` — уникальный идентификатор урока.
- `language_level_id` — внешний ключ, ссылающийся на таблицу `LanguageLevel` (уровень языка, к которому относится урок).
- `lesson_number` — номер урока (например, 1, 2, 3 и т.д.).
- `title` — название урока.
- `description` — описание урока (может быть пустым).

---

## 4. Таблица `Task`

Эта таблица хранит задачи для каждого урока.

### Поля таблицы:
- `id` — уникальный идентификатор задачи.
- `lesson_id` — внешний ключ, ссылающийся на таблицу `Lesson` (урок, к которому относится задача).
- `question` — текст вопроса задачи.
- `correct_answer` — правильный ответ на задачу.
- `option1`, `option2`, `option3` — варианты ответов для задачи.

---

## 5. Таблица `UserProgress`

Эта таблица хранит прогресс пользователя в выполнении задач.

### Поля таблицы:
- `id` — уникальный идентификатор записи о прогрессе.
- `user_id` — внешний ключ, ссылающийся на таблицу `CustomUser` (пользователь, который выполнил задачу).
- `task_id` — внешний ключ, ссылающийся на таблицу `Task` (задача, которую выполнил пользователь).
- `completed` — флаг, указывающий, выполнена ли задача (по умолчанию `False`).
- `date_completed` — дата и время выполнения задачи.

---

## 6. Таблица `Profile` (если используется)

Эта таблица хранит дополнительную информацию о профиле пользователя.

### Поля таблицы:
- `id` — уникальный идентификатор профиля.
- `user_id` — внешний ключ, ссылающийся на таблицу `CustomUser` (пользователь, к которому относится профиль).
- `bio` — биография пользователя (может быть пустой).
- `location` — местоположение пользователя (может быть пустым).

---

## 7. Таблицы для групп и разрешений

Django автоматически создает таблицы для управления группами и разрешениями. Эти таблицы связаны с вашей кастомной моделью пользователя (`CustomUser`).

### Таблица `auth_group`:
- `id` — уникальный идентификатор группы.
- `name` — название группы (уникальное).

### Таблица `auth_permission`:
- `id` — уникальный идентификатор разрешения.
- `name` — название разрешения.
- `content_type_id` — внешний ключ, ссылающийся на таблицу `django_content_type` (тип модели, к которой относится разрешение).
- `codename` — код разрешения (уникальный).

### Таблица `customuser_groups` (связь многие-ко-многим между `CustomUser` и `auth_group`):
- `id` — уникальный идентификатор связи.
- `customuser_id` — внешний ключ, ссылающийся на таблицу `CustomUser`.
- `group_id` — внешний ключ, ссылающийся на таблицу `auth_group`.

### Таблица `customuser_user_permissions` (связь многие-ко-многим между `CustomUser` и `auth_permission`):
- `id` — уникальный идентификатор связи.
- `customuser_id` — внешний ключ, ссылающийся на таблицу `CustomUser`.
- `permission_id` — внешний ключ, ссылающийся на таблицу `auth_permission`.

---

## 8. Служебные таблицы Django

Django также создает несколько служебных таблиц для своей работы:
- `django_migrations` — хранит информацию о примененных миграциях.
- `django_session` — хранит данные сессий пользователей.
- `django_content_type` — хранит информацию о типах моделей.

---

## Пример структуры базы данных

### Таблица `CustomUser`
| id  | password (хэш) | last_login       | is_superuser | username  | nickname | email           | is_staff | is_active | date_joined       | profile_picture       |
|-----|----------------|------------------|--------------|-----------|----------|-----------------|----------|-----------|-------------------|-----------------------|
| 1   | ...            | 2023-10-01 12:00 | False        | john_doe  | Johnny   | john@example.com| False    | True      | 2023-10-01 12:00  | profile_pics/john.jpg |

### Таблица `LanguageLevel`
| id  | level | description                          |
|-----|-------|--------------------------------------|
| 1   | A1    | Начальный уровень владения языком    |
| 2   | A2    | Элементарный уровень владения языком |

### Таблица `Lesson`
| id  | language_level_id | lesson_number | title               | description                          |
|-----|-------------------|---------------|---------------------|--------------------------------------|
| 1   | 1                 | 1             | Введение в язык     | Основы языка для уровня A1           |
| 2   | 1                 | 2             | Грамматика A1       | Основы грамматики для уровня A1      |

### Таблица `Task`
| id  | lesson_id | question               | correct_answer | option1       | option2       | option3       |
|-----|-----------|------------------------|----------------|---------------|---------------|---------------|
| 1   | 1         | Как сказать "Привет"? | Hello          | Hi            | Hey           | Hola          |
| 2   | 1         | Как сказать "Пока"?   | Goodbye        | Bye           | See you       | Later         |

### Таблица `UserProgress`
| id  | user_id | task_id | completed | date_completed       |
|-----|---------|---------|-----------|----------------------|
| 1   | 1       | 1       | True      | 2023-10-02 14:00     |
| 2   | 1       | 2       | False     | NULL                 |

### Таблица `Profile`
| id  | user_id | bio                  | location       |
|-----|---------|----------------------|----------------|
| 1   | 1       | Люблю учить языки    | Москва         |